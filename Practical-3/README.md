# Practical 3 - Measurement of SQL query execution times

The primary objective of this practical work is to measure execution times of SQL queries on large databases generated by a database generator.

## Exercise 1: Index

We began by activating the timer and measuring the execution time five times for a query with an existing code in the database.

```sql
Real User Sys
0.088 0.079445 0.007964
0.090 0.080602 0.008124
0.085 0.076590 0.007767
0.088 0.078418 0.008453
0.091 0.077850 0.008894
```

We repeated the operation with a non-existing code in the database.

```sql
Real User Sys
0.080 0.069247 0.008672
0.086 0.077139 0.007004
0.088 0.080683 0.006728
0.084 0.076905 0.006492
0.086 0.079380 0.006823
```

We created an index on the attribute 'code' and repeated the measurements for both queries.
For the query with an existing code:

```sql
Real User Sys
0.001 0.000177 0.000303
0.000 0.000162 0.000112
0.001 0.000169 0.000126
0.001 0.000160 0.000109
0.001 0.000175 0.000127
```

For the query with a non-existing code:

```sql
Real User Sys
0.001 0.000132 0.000092
0.001 0.000123 0.000092
0.001 0.000210 0.000151
0.000 0.000156 0.000111
0.000 0.000144 0.000103
```

We can see that execution times have fallen considerably in both cases. An index on a relevant attribute therefore makes it possible to reduce the execution time of certain queries.

## Exercise 2: Execution Time of a Query

We expect different execution times for different queries, especially queries involving multiple table links.

Results per query:

```sql
Real User Sys
Query 1 3.232 2.756857 0.460279
Query 2 0.334 0.277084 0.054734
Query 3 3.256 2.764119 0.480746
Query 4 2.582 2.452172 0.126528
```

(See report for query execution schemas.)

To improve execution time, we created an index on the `customerID` column of the Customer table as it appears regularly in the execution schemas.

Results per query after creating the index:

```sql
Real User Sys
Query 1 0.118 0.090930 0.026306
Query 2 0.114 0.090554 0.022382
Query 3 0.116 0.090793 0.023268
Query 4 0.113 0.090261 0.022385
```

## Exercise 3: Experimentation

We imagined the following query:

```sql
SELECT c.customerId FROM customer c JOIN facture f ON f.customerId = c.customerId ORDER BY name LIMIT 10;
```

To decrease the execution time of this query, we created two indices, one on the `name` column of the Customer table and another on the `customerId` column of the Customer table.

Results:

    Without index: 8.520 seconds
    With index: 0.04 seconds

Impressively, the execution time was reduced by over 200 times!

(See report for the query execution schema.)
